---
- hosts: localhost
  roles:
    - role: standard-test-basic
      tags:
        - classic
        - container
      required_packages:
        - bats
        - podman
        - podman-tests
      tests:
        - root-test:
            dir: ./
            run: ./test_podman.sh
            timeout: 15m
        - rootless-test:
            # running the test with su doesn't create the directory for fedora user on /run/user/
            # so create it manually
            dir: ./
            run: mkdir /run/user/$(id -u fedora); chown fedora /run/user/$(id -u fedora); su -c ${PWD}/test_podman.sh - fedora
            timeout: 15m
